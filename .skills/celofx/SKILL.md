---
name: celofx
description: Interact with CeloFX — an autonomous FX arbitrage agent on Celo. Use when querying Mento stablecoin rates, forex spreads, agent trades, or building integrations that consume CeloFX data via MCP, A2A, or direct API.
license: MIT
metadata:
  author: celofx
  version: "1.0.0"
---

# CeloFX Agent Skill

CeloFX is an autonomous FX arbitrage agent on Celo that compares Mento Broker on-chain stablecoin rates with real forex rates and executes swaps when spreads are favorable.

## When to Use

- Querying live Mento vs forex spread data
- Building agent-to-agent integrations that consume FX rate data
- Checking CeloFX agent trades, performance, or policy
- Integrating CeloFX data into dashboards or other agents
- Understanding CeloFX's on-chain decision audit trail

## Endpoints

| Protocol | URL | Purpose |
|----------|-----|---------|
| MCP | `https://celofx.vercel.app/api/mcp` | Machine-callable tool server (9 tools) |
| A2A | `https://celofx.vercel.app/.well-known/agent-card.json` | Agent-to-agent discovery card |
| ERC-8004 | `https://celofx.vercel.app/agent-metadata-v2.json` | On-chain agent identity metadata |
| OASF | `https://celofx.vercel.app/.well-known/oasf.json` | Open Agent Skills Framework manifest |
| x402 | `https://celofx.vercel.app/api/premium-signals` | Paid premium signals ($0.10 cUSD) |
| Health | `https://celofx.vercel.app/api/health` | Agent health status |

## On-Chain Addresses (Celo Mainnet, Chain ID 42220)

| Contract | Address |
|----------|---------|
| Agent Wallet | `0x6652AcDc623b7CCd52E115161d84b949bAf3a303` |
| ERC-8004 Identity Registry | `0x8004A169FB4a3325136EB29fA0ceB6D2e539a432` |
| ERC-8004 Reputation Registry | `0x8004BAa17C55a88189AE136b182e5fdA19dE9b63` |
| Decision Registry | `0xF8faC012318671b6694732939bcB6EA8d2c91662` |
| Mento Broker | `0x777A8255cA72412f0d706dc03C9D1987306B4CaD` |

Agent is registered as **ERC-8004 #10** on Celo.

## MCP Tools

CeloFX exposes 9 tools via the Model Context Protocol. Connect with any MCP client:

### 1. get_mento_rates

Get live Mento Broker on-chain stablecoin exchange rates compared with real forex rates. Returns spread analysis showing arbitrage opportunities.

**Input:** None
**Output:** Array of pair objects with `mentoRate`, `forexRate`, `spreadPct`, `direction`, `arbitrage` ("actionable" if |spread| > 0.3%)

```typescript
// Example response
{
  "pairs": [
    { "pair": "cUSD/cEUR", "mentoRate": 0.9215, "forexRate": 0.9180, "spreadPct": 0.38, "direction": "cUSD→cEUR", "arbitrage": "actionable" },
    { "pair": "cUSD/cREAL", "mentoRate": 5.82, "forexRate": 5.78, "spreadPct": 0.69, "direction": "cUSD→cREAL", "arbitrage": "actionable" }
  ],
  "source": "Mento Broker on-chain + Frankfurter forex API",
  "threshold": "Agent executes swaps when |spread| > 0.3%"
}
```

### 2. get_cross_venue_rates

Compare rates across Mento Broker and Uniswap V3 on Celo for cross-DEX arbitrage detection.

**Input:** None
**Output:** Per-pair Mento rate, Uniswap rate, forex rate, venue spread

### 3. get_signals

Get current FX and market trading signals generated by Claude AI analysis.

**Input:** `{ market?: "mento" | "forex" | "crypto" | "commodities" }`
**Output:** Array of signal objects with `asset`, `direction`, `confidence`, `reasoning`, `entryPrice`, `targetPrice`, `tier` (free/premium)

### 4. get_trades

Get on-chain Mento swap trades executed by the agent. Every trade has a verifiable Celoscan transaction hash.

**Input:** None
**Output:** Array of trade objects with `pair`, `amountIn`, `amountOut`, `rate`, `spreadPct`, `pnl`, `status`, `swapTxHash`, `celoscanUrl`

### 5. get_performance

Get the agent's verified track record: total volume, P&L, success rate, and on-chain proof.

**Input:** None
**Output:** `{ totalTrades, successRate, totalVolume, avgSpreadCaptured, cumulativePnlPct, pairsTraded, latestTrade }`

### 6. get_agent_info

Get agent identity: ERC-8004 registration, on-chain addresses, supported protocols, and capabilities.

**Input:** None
**Output:** Full agent metadata including identity registries, protocol endpoints, TEE status

### 7. get_agent_policy

Get the agent's Standing Intent policy: allowed tokens, protocols, spending limits, and decision framework.

**Input:** None
**Output:** AGENT_POLICY object with `permissions` (tokens, protocols, limits) and `decisionFramework`

### 8. get_decision_log

Get the agent's keccak256-hashed decision audit trail. Decisions are committed on-chain to the Decision Registry.

**Input:** None
**Output:** Array of decision objects with `orderId`, `action`, `hash`, `timestamp`, `reasoning`

### 9. get_defi_yields

Get live stablecoin DeFi yields on Celo from DeFiLlama (Aave V3, Uniswap V3, Moola Market).

**Input:** None
**Output:** Array of yield objects with `pool`, `project`, `apy`, `apyMean30d`, `tvl`

## MCP Connection Example

### Using mcp-client (TypeScript)

```typescript
import { Client } from "@modelcontextprotocol/sdk/client/index.js";
import { StreamableHTTPClientTransport } from "@modelcontextprotocol/sdk/client/streamableHttp.js";

const transport = new StreamableHTTPClientTransport(
  new URL("https://celofx.vercel.app/api/mcp")
);
const client = new Client({ name: "my-agent", version: "1.0.0" });
await client.connect(transport);

// Get Mento rates
const rates = await client.callTool({ name: "get_mento_rates", arguments: {} });
console.log(JSON.parse(rates.content[0].text));

// Get agent performance
const perf = await client.callTool({ name: "get_performance", arguments: {} });
console.log(JSON.parse(perf.content[0].text));
```

### Using curl (JSON-RPC)

```bash
# Initialize
curl -X POST https://celofx.vercel.app/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","id":1,"method":"initialize","params":{}}'

# List tools
curl -X POST https://celofx.vercel.app/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","id":2,"method":"tools/list","params":{}}'

# Call a tool
curl -X POST https://celofx.vercel.app/api/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","id":3,"method":"tools/call","params":{"name":"get_mento_rates","arguments":{}}}'
```

### Claude Desktop config

```json
{
  "mcpServers": {
    "celofx": {
      "url": "https://celofx.vercel.app/api/mcp"
    }
  }
}
```

## A2A (Agent-to-Agent) Skills

CeloFX exposes 4 A2A skills via the agent card at `/.well-known/agent-card.json`:

| Skill ID | Name | Description |
|----------|------|-------------|
| `fx_rate_analysis` | FX Rate Analysis | Compares live Mento on-chain rates with forex rates for arbitrage detection |
| `execute_swap` | Execute Mento Swap | Executes a Mento Broker stablecoin swap with CIP-64 fee abstraction |
| `portfolio_status` | Portfolio Status | Agent wallet balances, recent trades with Celoscan links |
| `performance_tracking` | Performance Tracking | Verified track record with on-chain proof |

## Agent Policy (Standing Intent)

CeloFX operates under a cryptographically signed policy that constrains its behavior:

| Parameter | Value |
|-----------|-------|
| Allowed Tokens | cUSD, cEUR, cREAL, USDC, USDT |
| Allowed Protocols | Mento Broker, Uniswap V3 |
| Max Per Transaction | 100 cUSD |
| Max Daily Volume | 500 cUSD (rolling 24h) |
| Min Profitable Spread | 0.1% |
| Gas Safety | Rejects if gas > 50% of expected profit |
| Circuit Breaker | `AGENT_PAUSED=true` halts all execution |

## Decision Audit Trail

Every agent decision is:
1. Hashed with `keccak256(orderId, action, reasoning, timestamp)` before execution
2. Committed on-chain to the Decision Registry at `0xF8faC012318671b6694732939bcB6EA8d2c91662`
3. Viewable at `https://celofx.vercel.app/api/agent/decisions`
4. Verifiable on Celoscan: `https://celoscan.io/address/0xF8faC012318671b6694732939bcB6EA8d2c91662#events`

## Trust & Verification

| Trust Layer | Details |
|-------------|---------|
| Identity | ERC-8004 #10 on Celo Identity Registry |
| Reputation | ERC-8004 Reputation Registry at `0x8004BAa17C55a88189AE136b182e5fdA19dE9b63` |
| TEE | Intel TDX via Phala Cloud (when deployed to TEE), self-declared on Vercel |
| Decisions | On-chain hashed in Decision Registry |
| Payments | x402 micropayments for premium signals |

## Supported Stablecoin Pairs

| Pair | Corridor | Use Case |
|------|----------|----------|
| cUSD/cEUR | USD↔EUR | Euro remittances |
| cUSD/cREAL | USD↔BRL | Brazil remittances |
| cUSD/USDC | USD stablecoins | Stablecoin arbitrage |
| cEUR/USDC | EUR↔USD | Cross-currency |
| cREAL/USDC | BRL↔USD | Cross-currency |
